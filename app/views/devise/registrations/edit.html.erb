<div style="max-width: 600px; margin: 40px auto; padding: 20px;">
  
  <h2 style="color: #5A4A42; border-bottom: 2px solid #D98E63; padding-bottom: 10px; margin-bottom: 30px;">
    👤 プロフィール編集
  </h2>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    <%= render "devise/shared/error_messages", resource: resource %>

    <div style="margin-bottom: 30px; text-align: center;">
      <div style="margin-bottom: 10px;">
        <% if resource.image.attached? %>
          <%= image_tag resource.image, style: "width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #eee;" %>
          <p style="font-size: 0.8rem; color: #888;">現在の写真</p>
        <% else %>
          <div style="width: 100px; height: 100px; border-radius: 50%; background: #eee; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-size: 40px;">😊</div>
          <p style="font-size: 0.8rem; color: #888;">写真はまだありません</p>
        <% end %>
      </div>
      
      <%= f.label :image, "新しい写真を選ぶ", style: "cursor: pointer; background: #eee; padding: 8px 16px; border-radius: 4px; font-size: 0.9rem;" %>
      <%= f.file_field :image, style: "display: block; margin: 10px auto;" %>
    </div>
    <div style="margin-bottom: 20px;">
      <%= f.label :name, "お名前", style: "display: block; font-weight: bold; margin-bottom: 5px;" %>
      <%= f.text_field :name, autofocus: true, autocomplete: "name", style: "width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ccc;" %>
    </div>

    <div style="margin-bottom: 20px;">
      <%= f.label :email, "メールアドレス", style: "display: block; font-weight: bold; margin-bottom: 5px;" %>
      <%= f.email_field :email, autofocus: true, autocomplete: "email", style: "width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ccc;" %>
    </div>

    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div style="margin-bottom: 20px; color: orange;">
        現在、確認待ちのメールアドレス: <%= resource.unconfirmed_email %>
      </div>
    <% end %>

    <div style="margin-bottom: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px;">
      <h4 style="margin-top: 0; color: #666;">パスワード変更（変更しない場合は空欄でOK）</h4>
      
      <div style="margin-bottom: 15px;">
        <%= f.label :password, "新しいパスワード", style: "display: block; font-size: 0.9rem;" %>
        <%= f.password_field :password, autocomplete: "new-password", style: "width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;" %>
        <% if @minimum_password_length %>
          <em style="font-size: 0.8rem; color: #888;">(<%= @minimum_password_length %> 文字以上)</em>
        <% end %>
      </div>

      <div style="margin-bottom: 0;">
        <%= f.label :password_confirmation, "新しいパスワード（確認用）", style: "display: block; font-size: 0.9rem;" %>
        <%= f.password_field :password_confirmation, autocomplete: "new-password", style: "width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;" %>
      </div>
    </div>

    <div style="margin-bottom: 30px;">
      <%= f.label :current_password, "現在のパスワード（変更を保存するために必要です）", style: "display: block; font-weight: bold; margin-bottom: 5px; color: #D98E63;" %>
      <%= f.password_field :current_password, autocomplete: "current-password", style: "width: 100%; padding: 10px; border-radius: 4px; border: 2px solid #D98E63;" %>
    </div>

    <div style="text-align: center;">
      <%= f.submit "変更を保存する", style: "background: #5A4A42; color: white; border: none; padding: 12px 30px; border-radius: 30px; font-weight: bold; cursor: pointer; font-size: 1rem;" %>
    </div>
  <% end %>

  <div style="margin-top: 50px; text-align: center;">
    <%= link_to "戻る", :back, style: "color: #999; text-decoration: none;" %>
  </div>
</div>