<div style="max-width: 600px; margin: 40px auto; padding: 20px;">
  
  <div style="margin-bottom: 20px;">
    <%= link_to user_path(@user), style: "text-decoration: none; color: #999; display: inline-flex; align-items: center; gap: 5px;" do %>
      <i class="fa-solid fa-arrow-left"></i> マイページに戻る
    <% end %>
  </div>

  <div style="background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); padding: 30px; border: 1px solid #eee;">
    
    <h2 style="color: #5A4A42; margin-top: 0; margin-bottom: 25px; text-align: center;">
      <i class="fa-solid fa-user-pen" style="color: #D98E63;"></i> プロフィールの編集
    </h2>

    <%= form_with(model: @user, local: true) do |f| %>

      <% if @user.errors.any? %>
        <div style="background: #fff5f5; color: #c53030; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9rem;">
          <ul style="margin: 0; padding-left: 20px;">
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div style="margin-bottom: 25px; text-align: center;">
        <div style="width: 100px; height: 100px; border-radius: 50%; background: #eee; margin: 0 auto 10px; overflow: hidden; border: 1px solid #ddd;">
          <% if @user.image.attached? %>
            <%= image_tag @user.image, style: "width: 100%; height: 100%; object-fit: cover;" %>
          <% else %>
            <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 40px;">👤</div>
          <% end %>
        </div>
        <%= f.label :image, "📷 画像を変更する", style: "cursor: pointer; color: #D98E63; font-weight: bold; font-size: 0.9rem; display: inline-block; padding: 5px 10px; border: 1px solid #D98E63; border-radius: 20px;" %>
        <%= f.file_field :image, style: "display: none;", onchange: "alert('画像が選択されました！保存ボタンを押して確定してください。')" %>
      </div>

      <div style="margin-bottom: 25px;">
        <%= f.label :name, "お名前 (ニックネーム可)", style: "display: block; font-weight: bold; margin-bottom: 8px; color: #555;" %>
        <%= f.text_field :name, style: "width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;" %>
      </div>

      <div style="margin-bottom: 30px;">
        <%= f.label :introduction, "自己紹介", style: "display: block; font-weight: bold; margin-bottom: 8px; color: #555;" %>
        <%= f.text_area :introduction, rows: 6, placeholder: "はじめまして！猫が大好きで、これまでに3匹の猫と暮らしてきました。丁寧なお世話を心がけます。", style: "width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; line-height: 1.6; box-sizing: border-box;" %>
        <p style="font-size: 0.8rem; color: #999; text-align: right; margin-top: 5px;">※500文字以内で入力してください</p>
      </div>

      <div style="display: flex; gap: 15px;">
        <%= link_to "キャンセル", user_path(@user), style: "flex: 1; text-align: center; background: #f0f0f0; color: #666; padding: 12px; border-radius: 30px; text-decoration: none; font-weight: bold;" %>
        
        <%= f.button "変更を保存する", type: "submit", style: "flex: 2; background: #D98E63; color: white; border: none; padding: 12px; border-radius: 30px; font-weight: bold; font-size: 1rem; cursor: pointer;" %>
      </div>

    <% end %>

  </div>
</div>