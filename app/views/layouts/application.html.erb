<!DOCTYPE html>
<html>
  <head>
    <title>Nekostay</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <nav style="display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background-color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px;">
      
      <%= link_to "Nekostay", root_path, style: "font-size: 1.5rem; font-weight: bold; color: #5A4A42; text-decoration: none;" %>

      <div style="display: flex; align-items: center; gap: 15px;">
        <% if user_signed_in? %>
          <% if current_user.avatar.attached? %>
            <%= image_tag current_user.avatar, style: "width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid #ddd;" %>
          <% else %>
            <i class="fa-solid fa-circle-user" style="font-size: 36px; color: #ccc;"></i>
          <% end %>

          <%= link_to "設定", edit_user_registration_path, style: "color: #5A4A42; text-decoration: none; font-weight: bold;" %>

          <%= link_to "ログアウト", destroy_user_session_path, data: { turbo_method: :delete }, style: "color: #d9534f; text-decoration: none; font-size: 0.9rem;" %>

        <% else %>
          <%= link_to "ログイン", new_user_session_path, style: "color: #5A4A42; text-decoration: none; margin-right: 10px;" %>
          <%= link_to "新規登録", new_user_registration_path, style: "background-color: #D98E63; color: white; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-weight: bold;" %>
        <% end %>
      </div>
    </nav>
    <div class="container">
      <div id="flash_messages">
        <% if notice.present? %>
          <p class="flash flash--notice" style="color: green; background: #e6ffed; padding: 10px; border-radius: 5px;"><%= notice %></p>
        <% end %>
        <% if alert.present? %>
          <p class="flash flash--alert" style="color: red; background: #ffe6e6; padding: 10px; border-radius: 5px;"><%= alert %></p>
        <% end %>
      </div>

      <%= yield %>
    </div>
    <turbo-frame id="modal"></turbo-frame>
  </body>
</html>
