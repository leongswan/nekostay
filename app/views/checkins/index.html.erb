<h1>Checkins <span class="meta">(Stay #<%= @stay.id %>)</span></h1>

<p class="meta">
  期間: <%= @stay.start_on %> 〜 <%= @stay.end_on %>
</p>

<div class="stack stack--end" style="margin: 8px 0 16px;">
  <%= link_to "新規チェックイン", new_stay_checkin_path(@stay), data: { turbo_frame: "modal" }, class: "btn btn--primary" %>
  <%= link_to "Stay詳細へ", stay_path(@stay), class: "btn" %>
</div>

<table class="table">
  <thead>
    <tr>
      <th>Time</th>
      <th>Weight</th>
      <th>Meal</th>
      <th>Litter</th>
      <th>Meds</th>
      <th>Memo</th>
      <th style="width:160px;">Actions</th>
    </tr>
  </thead>
    <tbody>
  <% if @checkins.empty? %>
    <tr>
      <td colspan="7" class="meta" style="text-align:center; padding:24px;">
        まだチェックインがありません。
        <%= link_to "最初のチェックインを作成", new_stay_checkin_path(@stay), class: "btn btn--primary", style: "margin-left:8px;" %>
      </td>
    </tr>
  <% else %>
    <% @checkins.each do |c| %>
      <tr>
        <td class="nowrap"><%= link_to dt_label(c.checked_at), stay_checkin_path(@stay, c) %></td>
        <td class="col-right"><%= weight_label(c.weight) %></td>
        <td><%= meal_label(c.meal) %></td>
        <td><%= litter_label(c.litter) %></td>
        <td><%= meds_badges(c.meds) %></td>


        <td class="truncate"><%= simple_format(c.memo) %></td>

        <td>
          <div class="stack">
            <%= link_to "詳細", stay_checkin_path(@stay, c), class: "btn btn--ghost" %>
            <%= link_to "編集", edit_stay_checkin_path(@stay, c), data: { turbo_frame: "modal" }, class: "btn" %>
            <%= button_to "削除", stay_checkin_path(@stay, c),
                  method: :delete,
                  form: { data: { turbo_confirm: "削除してよろしいですか？" }, class: "inline" },
                  class: "btn btn--danger" %>
          </div>
        </td>
      </tr>
    <% end %>
  <% end %>
</tbody>
</table>

