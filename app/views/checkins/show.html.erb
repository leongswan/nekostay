<!-- app/views/checkins/show.html.erb -->
<h1>Checkin 詳細 <span class="meta">(Stay #<%= @stay.id %>)</span></h1>

<p class="meta">
  期間: <%= @stay.start_on %> 〜 <%= @stay.end_on %>
</p>

<div class="stack stack--end" style="margin: 8px 0 16px;">
  <%= link_to "一覧へ戻る", stay_checkins_path(@stay), class: "btn" %>
  <%= link_to "編集", edit_stay_checkin_path(@stay, @checkin), class: "btn btn--primary" %>
  <%= button_to "削除", stay_checkin_path(@stay, @checkin),
        method: :delete,
        form: { data: { turbo_confirm: "削除してよろしいですか？" }, class: "inline" },
        class: "btn btn--danger" %>
</div>

<!-- 概要カード -->
<div class="card" style="margin-bottom:16px;">
  <div class="form-grid">
    <div>
      <p class="meta">記録日時</p>
      <p><strong><%= dt_label(@checkin.checked_at) %></strong></p>
    </div>
    <div>
      <p class="meta">体重</p>
      <p><%= weight_label(@checkin.weight) %></p>
    </div>
  </div>

  <p class="meta" style="margin-top:8px;">メモ</p>
  <p class="truncate"><%= simple_format(@checkin.memo.presence || "—") %></p>
</div>

<!-- 詳細カード -->
<div class="card">
  <h3 style="margin-top:0;">詳細記録</h3>

  <div class="form-grid">
    <div>
      <p class="meta">Meal</p>
      <p><%= meal_label(@checkin.meal) %></p>
    </div>

    <div>
      <p class="meta">Litter</p>
      <p><%= litter_label(@checkin.litter) %></p>
    </div>
  </div>

  <p class="meta" style="margin-top:12px;">Meds</p>
  <p>
    <% md = @checkin.meds || {} %>
    <% if md.blank? %>
      -
    <% else %>
      <%# バッジ表示（一覧と統一） %>
      <% if md["none"] %><span class="pill pill--warn">投与なし</span><% end %>
      <% if md["given"] %><span class="pill pill--ok">投与済</span><% end %>
      <% if md["vaccine_3rd"] %><span class="pill pill--ok">ワクチン3回目済</span><% end %>
      <% if md["name"].present? || md["dose"].present? %>
        <span class="pill"><%= [md["name"], md["dose"]].compact.join(" / ") %></span>
      <% end %>
    <% end %>
  </p>
</div>

<!-- 下部アクション（上にもあるけどページ末にも置くと便利） -->
<div class="stack" style="margin-top:16px;">
  <%= link_to "一覧へ戻る", stay_checkins_path(@stay), class: "btn" %>
  <%= link_to "編集", edit_stay_checkin_path(@stay, @checkin), class: "btn btn--primary" %>
  <%= button_to "削除", stay_checkin_path(@stay, @checkin),
        method: :delete,
        form: { data: { turbo_confirm: "削除してよろしいですか？" }, class: "inline" },
        class: "btn btn--danger" %>
</div>
