<h1>Checkin 詳細 <span class="meta">(Stay #<%= @stay.id %>)</span></h1>

<div class="card" style="margin-bottom:16px;">
  <p class="meta">記録日時</p>
  <p><strong><%= @checkin.checked_at&.strftime("%Y-%m-%d %H:%M") %></strong></p>

  <p class="meta" style="margin-top:8px;">体重</p>
  <p><%= @checkin.weight %> kg</p>

  <p class="meta" style="margin-top:8px;">メモ</p>
  <p><%= simple_format(@checkin.memo) %></p>
</div>

<div class="card">
  <h3 style="margin-top:0;">詳細記録</h3>

  <h3>Meal</h3>
  <% m = @checkin.meal || {} %>
  <p><%= m.present? ? [m["brand"], m["amount"]].compact.join(" / ") : "-" %></p>

  <h3>Litter</h3>
  <% l = @checkin.litter || {} %>
  <p>
    <% items = [] %>
    <% items << "固まり: #{l['clumps']}" if l['clumps'] %>
    <% items << "おしっこ: #{l['pee']}" if l['pee'] %>
    <%= items.present? ? items.join(" / ") : "-" %>
  </p>

  <h3>Meds</h3>
  <% md = @checkin.meds || {} %>
  <p>
    <% items = [] %>
    <% items << "投与なし" if md["none"] %>
    <% items << "投与済"   if md["given"] %>
    <% items << "ワクチン3回目済" if md["vaccine_3rd"] %>
    <% items << "薬剤: #{md['name']}" if md['name'].present? %>
    <% items << "投与量: #{md['dose']}" if md['dose'].present? %>
    <%= items.present? ? items.join(" / ") : "-" %>
  </p>
</div>

<div class="stack" style="margin-top:16px;">
  <%= link_to "一覧へ戻る", stay_checkins_path(@stay), class: "btn" %>
  <%= link_to "編集", edit_stay_checkin_path(@stay, @checkin), class: "btn btn--primary" %>
  <%= button_to "削除", stay_checkin_path(@stay, @checkin),
        method: :delete,
        form: { data: { turbo_confirm: "削除してよろしいですか？" }, class: "inline" },
        class: "btn btn--danger" %>
</div>
